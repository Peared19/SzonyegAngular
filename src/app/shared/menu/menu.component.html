<mat-toolbar color="primary" class="navbar">
  <button mat-icon-button class="menu-toggle" (click)="isMenuOpen = !isMenuOpen">
    <mat-icon>menu</mat-icon>
  </button>

  <img src="assets/images/The_Rug_Hub_logo.png" id="logo" alt="logo">
  <span class="navbar-title">The Rug Hub</span>

  <span class="navbar-spacer"></span>

  <div class="desktop-nav">
    <button mat-button routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
      <mat-icon>home</mat-icon>
      <span>Home</span>
    </button>

    <button mat-button routerLink="/carpets" routerLinkActive="active">
      <mat-icon>carpet</mat-icon>
      <span>Carpets</span>
    </button>

    <button mat-button routerLink="/cart" routerLinkActive="active" *ngIf="authService.isAuthenticated() | async">
      <mat-icon>shopping_cart</mat-icon>
      <span>Cart</span>
      <span class="cart-badge" *ngIf="(cartItems$ | async)?.length">
        {{ (cartItems$ | async)?.length || 0 }}
      </span>
    </button>

    <button mat-button routerLink="/auth/register" routerLinkActive="active" *ngIf="!(authService.isAuthenticated() | async)">
      <mat-icon>person_add</mat-icon>
      <span>Register</span>
    </button>

    <button mat-button routerLink="/auth/login" routerLinkActive="active" *ngIf="!(authService.isAuthenticated() | async)">
      <mat-icon>login</mat-icon>
      <span>Login</span>
    </button>

    <button mat-button routerLink="/profile" routerLinkActive="active" *ngIf="authService.isAuthenticated() | async">
      <mat-icon>person</mat-icon>
      <span>Profile</span>
    </button>

    <button mat-button routerLink="/admin/add-carpet" routerLinkActive="active" *ngIf="isAdmin">
      <mat-icon>add</mat-icon>
      <span>Add Carpet</span>
    </button>
  </div>

  <button mat-icon-button (click)="logout()" *ngIf="authService.isAuthenticated() | async">
    <mat-icon>logout</mat-icon>
  </button>
</mat-toolbar>

<div class="mobile-nav-container" [class.open]="isMenuOpen">
  <mat-nav-list class="mobile-nav">
    <a mat-list-item routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" (click)="isMenuOpen = false">
      <mat-icon>home</mat-icon>
      <span mat-line>Home</span>
    </a>

    <a mat-list-item routerLink="/carpets" routerLinkActive="active" (click)="isMenuOpen = false">
      <mat-icon>carpet</mat-icon>
      <span mat-line>Carpets</span>
    </a>

    <a mat-list-item routerLink="/cart" routerLinkActive="active" (click)="isMenuOpen = false" *ngIf="authService.isAuthenticated() | async">
      <mat-icon>shopping_cart</mat-icon>
      <span mat-line>Cart</span>
      <span class="cart-badge" *ngIf="(cartItems$ | async)?.length">
        {{ (cartItems$ | async)?.length || 0 }}
      </span>
    </a>

    <a mat-list-item routerLink="/auth/register" routerLinkActive="active" (click)="isMenuOpen = false" *ngIf="!(authService.isAuthenticated() | async)">
      <mat-icon>person_add</mat-icon>
      <span mat-line>Register</span>
    </a>

    <a mat-list-item routerLink="/auth/login" routerLinkActive="active" (click)="isMenuOpen = false" *ngIf="!(authService.isAuthenticated() | async)">
      <mat-icon>login</mat-icon>
      <span mat-line>Login</span>
    </a>

    <a mat-list-item routerLink="/profile" routerLinkActive="active" (click)="isMenuOpen = false" *ngIf="authService.isAuthenticated() | async">
      <mat-icon>person</mat-icon>
      <span mat-line>Profile</span>
    </a>

    <a mat-list-item routerLink="/add-carpet" routerLinkActive="active" (click)="isMenuOpen = false" *ngIf="isAdmin">
      <mat-icon>add</mat-icon>
      <span mat-line>Add Carpet</span>
    </a>

    <a mat-list-item (click)="logout(); isMenuOpen = false" *ngIf="authService.isAuthenticated() | async">
      <mat-icon>logout</mat-icon>
      <span mat-line>Logout</span>
    </a>
  </mat-nav-list>
</div>
